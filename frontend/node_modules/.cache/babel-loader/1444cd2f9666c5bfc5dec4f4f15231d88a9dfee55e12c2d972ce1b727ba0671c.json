{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\packt\\\\git\\\\cloudWebProject\\\\frontend\\\\src\\\\components\\\\ReviewTableRow.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useRef } from 'react';\nimport { deleteReviewById, updateReviewById, getReviews } from \"../services/ApiService\";\nimport { ReviewContext } from '../context/ReveiwContext';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ReviewTableRow({\n  id,\n  name,\n  grade,\n  content,\n  book_id\n}) {\n  _s();\n  const {\n    removeReviewById,\n    updateReviews\n  } = useContext(ReviewContext);\n  const navigate = useNavigate();\n  const [isEditing, setIsEditing] = useState(false);\n  const [editedReview, setEditedReview] = useState({\n    name: name,\n    grade: grade,\n    content: content\n  });\n  const nameRef = useRef();\n  const gradeRef = useRef();\n  const contentRef = useRef();\n  async function deleteReview() {\n    try {\n      await deleteReviewById(id);\n      removeReviewById(id);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  }\n  async function updateReview() {\n    try {\n      const updatedReview = {\n        id: id,\n        name: nameRef.current.value,\n        grade: gradeRef.current.value,\n        content: contentRef.current.value\n      };\n      await updateReviewById(id, updatedReview);\n      const updatedReviews = await getUpdatedReviews();\n      updateReviews(updatedReviews);\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Error updating review:', error);\n    }\n  }\n  async function getUpdatedReviews() {\n    const response = await getReviews();\n    return response;\n  }\n  function handleEditClick() {\n    setIsEditing(true);\n  }\n  function handleCancelClick() {\n    setIsEditing(false);\n    setEditedReview({\n      name: name,\n      grade: grade,\n      content: content\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n      children: id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: editedReview.name,\n        ref: nameRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 26\n      }, this) : name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: editedReview.grade,\n        ref: gradeRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 26\n      }, this) : grade\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEditing ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        defaultValue: editedReview.content,\n        ref: contentRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 24\n      }, this) : content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteReview,\n        children: \"\\uC0AD\\uC81C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: updateReview,\n          children: \"\\uC800\\uC7A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCancelClick,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEditClick,\n        children: \"\\uC218\\uC815\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewTableRow, \"pv2Z8SvTHNvtcGRZTTLICvCz+3k=\", false, function () {\n  return [useNavigate];\n});\n_c = ReviewTableRow;\nvar _c;\n$RefreshReg$(_c, \"ReviewTableRow\");","map":{"version":3,"names":["React","useContext","useState","useRef","deleteReviewById","updateReviewById","getReviews","ReviewContext","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","ReviewTableRow","id","name","grade","content","book_id","_s","removeReviewById","updateReviews","navigate","isEditing","setIsEditing","editedReview","setEditedReview","nameRef","gradeRef","contentRef","deleteReview","error","console","updateReview","updatedReview","current","value","updatedReviews","getUpdatedReviews","response","handleEditClick","handleCancelClick","children","fileName","_jsxFileName","lineNumber","columnNumber","type","defaultValue","ref","onClick","_c","$RefreshReg$"],"sources":["C:/Users/packt/git/cloudWebProject/frontend/src/components/ReviewTableRow.js"],"sourcesContent":["import React, { useContext ,useState,useRef} from 'react';\r\nimport { deleteReviewById, updateReviewById,getReviews } from \"../services/ApiService\"\r\nimport { ReviewContext } from '../context/ReveiwContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nexport default function ReviewTableRow({id,name,grade,content,book_id}){\r\n  const {removeReviewById, updateReviews} = useContext(ReviewContext);\r\n  const navigate = useNavigate();\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editedReview, setEditedReview] = useState({ name: name, grade: grade, content: content });\r\n\r\n  const nameRef= useRef();\r\n  const gradeRef= useRef();\r\n  const contentRef= useRef();\r\n\r\n  async function deleteReview() {\r\n    try {\r\n      await deleteReviewById(id);\r\n      removeReviewById(id);\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    }\r\n  }\r\n\r\n  async function updateReview() {\r\n    try {\r\n      const updatedReview = {\r\n        id: id,\r\n        name: nameRef.current.value,\r\n        grade: gradeRef.current.value,\r\n        content: contentRef.current.value\r\n      };\r\n      await updateReviewById(id, updatedReview);\r\n      const updatedReviews = await getUpdatedReviews(); \r\n      updateReviews(updatedReviews); \r\n      setIsEditing(false); \r\n    } catch (error) {\r\n      console.error('Error updating review:', error);\r\n    }\r\n  }\r\n\r\n  async function getUpdatedReviews() {\r\n    const response = await getReviews();\r\n    return response;\r\n  }\r\n\r\n  function handleEditClick() {\r\n    setIsEditing(true);\r\n  }\r\n\r\n  function handleCancelClick() {\r\n    setIsEditing(false);\r\n    setEditedReview({ name: name, grade: grade, content: content });\r\n  }\r\n\r\n\r\n  return (\r\n    <tr>\r\n        <th>{id}</th>\r\n        \r\n        <td>{isEditing ? <input type=\"text\" defaultValue={editedReview.name} ref={nameRef} /> : name}</td>\r\n        <td>{isEditing ? <input type=\"text\" defaultValue={editedReview.grade} ref={gradeRef} /> : grade}</td>\r\n      <td>{isEditing ? <textarea defaultValue={editedReview.content} ref={contentRef} /> : content}</td>\r\n      <td>\r\n        <button onClick={deleteReview}>삭제</button>\r\n      </td>\r\n      <td>\r\n        {isEditing ? (\r\n          <>\r\n            <button onClick={updateReview}>저장</button>\r\n            <button onClick={handleCancelClick}>취소</button>\r\n          </>\r\n        ) : (\r\n          <button onClick={handleEditClick}>수정</button>\r\n        )}\r\n      </td>\r\n    </tr>\r\n    \r\n  );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,EAACC,MAAM,QAAO,OAAO;AACzD,SAASC,gBAAgB,EAAEC,gBAAgB,EAACC,UAAU,QAAQ,wBAAwB;AACtF,SAASC,aAAa,QAAQ,0BAA0B;AACxD,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAG/C,eAAe,SAASC,cAAcA,CAAC;EAACC,EAAE;EAACC,IAAI;EAACC,KAAK;EAACC,OAAO;EAACC;AAAO,CAAC,EAAC;EAAAC,EAAA;EACrE,MAAM;IAACC,gBAAgB;IAAEC;EAAa,CAAC,GAAGpB,UAAU,CAACM,aAAa,CAAC;EACnE,MAAMe,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACuB,YAAY,EAAEC,eAAe,CAAC,GAAGxB,QAAQ,CAAC;IAAEa,IAAI,EAAEA,IAAI;IAAEC,KAAK,EAAEA,KAAK;IAAEC,OAAO,EAAEA;EAAQ,CAAC,CAAC;EAEhG,MAAMU,OAAO,GAAExB,MAAM,CAAC,CAAC;EACvB,MAAMyB,QAAQ,GAAEzB,MAAM,CAAC,CAAC;EACxB,MAAM0B,UAAU,GAAE1B,MAAM,CAAC,CAAC;EAE1B,eAAe2B,YAAYA,CAAA,EAAG;IAC5B,IAAI;MACF,MAAM1B,gBAAgB,CAACU,EAAE,CAAC;MAC1BM,gBAAgB,CAACN,EAAE,CAAC;IAEtB,CAAC,CAAC,OAAOiB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAClD;EACF;EAEA,eAAeE,YAAYA,CAAA,EAAG;IAC5B,IAAI;MACF,MAAMC,aAAa,GAAG;QACpBpB,EAAE,EAAEA,EAAE;QACNC,IAAI,EAAEY,OAAO,CAACQ,OAAO,CAACC,KAAK;QAC3BpB,KAAK,EAAEY,QAAQ,CAACO,OAAO,CAACC,KAAK;QAC7BnB,OAAO,EAAEY,UAAU,CAACM,OAAO,CAACC;MAC9B,CAAC;MACD,MAAM/B,gBAAgB,CAACS,EAAE,EAAEoB,aAAa,CAAC;MACzC,MAAMG,cAAc,GAAG,MAAMC,iBAAiB,CAAC,CAAC;MAChDjB,aAAa,CAACgB,cAAc,CAAC;MAC7Bb,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAChD;EACF;EAEA,eAAeO,iBAAiBA,CAAA,EAAG;IACjC,MAAMC,QAAQ,GAAG,MAAMjC,UAAU,CAAC,CAAC;IACnC,OAAOiC,QAAQ;EACjB;EAEA,SAASC,eAAeA,CAAA,EAAG;IACzBhB,YAAY,CAAC,IAAI,CAAC;EACpB;EAEA,SAASiB,iBAAiBA,CAAA,EAAG;IAC3BjB,YAAY,CAAC,KAAK,CAAC;IACnBE,eAAe,CAAC;MAAEX,IAAI,EAAEA,IAAI;MAAEC,KAAK,EAAEA,KAAK;MAAEC,OAAO,EAAEA;IAAQ,CAAC,CAAC;EACjE;EAGA,oBACEP,OAAA;IAAAgC,QAAA,gBACIhC,OAAA;MAAAgC,QAAA,EAAK5B;IAAE;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAEbpC,OAAA;MAAAgC,QAAA,EAAKnB,SAAS,gBAAGb,OAAA;QAAOqC,IAAI,EAAC,MAAM;QAACC,YAAY,EAAEvB,YAAY,CAACV,IAAK;QAACkC,GAAG,EAAEtB;MAAQ;QAAAgB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAAG/B;IAAI;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAClGpC,OAAA;MAAAgC,QAAA,EAAKnB,SAAS,gBAAGb,OAAA;QAAOqC,IAAI,EAAC,MAAM;QAACC,YAAY,EAAEvB,YAAY,CAACT,KAAM;QAACiC,GAAG,EAAErB;MAAS;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAAG9B;IAAK;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACvGpC,OAAA;MAAAgC,QAAA,EAAKnB,SAAS,gBAAGb,OAAA;QAAUsC,YAAY,EAAEvB,YAAY,CAACR,OAAQ;QAACgC,GAAG,EAAEpB;MAAW;QAAAc,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAAG7B;IAAO;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAClGpC,OAAA;MAAAgC,QAAA,eACEhC,OAAA;QAAQwC,OAAO,EAAEpB,YAAa;QAAAY,QAAA,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxC,CAAC,eACLpC,OAAA;MAAAgC,QAAA,EACGnB,SAAS,gBACRb,OAAA,CAAAE,SAAA;QAAA8B,QAAA,gBACEhC,OAAA;UAAQwC,OAAO,EAAEjB,YAAa;UAAAS,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC1CpC,OAAA;UAAQwC,OAAO,EAAET,iBAAkB;UAAAC,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,eAC/C,CAAC,gBAEHpC,OAAA;QAAQwC,OAAO,EAAEV,eAAgB;QAAAE,QAAA,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAC7C;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAGT;AAAC3B,EAAA,CA3EuBN,cAAc;EAAA,QAEnBL,WAAW;AAAA;AAAA2C,EAAA,GAFNtC,cAAc;AAAA,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}